{%extends "layout.html"%}
{% block cssStyle%}
<style type="text/css">
.userPageStarInfo{height:5em; margin-bottom:0; overflow:visible;}
.userPageIconPos{float:right; height:90%; width:15%;position:relative; padding-top:1.925em;}
</style>
{%endblock%}
{% block body%}

	<div class="well">
	

			<div style="text-align:center"><img style="margin-bottom:1em;" src="../static/img/goldstar.png" height="100" width="100" /></div>
			<h3 style="text-align:center;">
				{{theOtherUser.firstName}} {{theOtherUser.lastName}}<hr /></h3>
			<div style="text-align:center"><button onclick="filterStarList('all')" class="hashTagButton" style="text-align:center; font-size:1.8em"><script>
				var totalStars = {{theOtherUser.starsReceived}} + {{theOtherUser.starsGiven}}
				document.write(totalStars);
			</script> Stars Total
			</h4></div><br />
			<div style="text-align:center"><button onclick="filterStarList('given')" class="hashTagButton" style="text-align:center; font-size:1.5em">
				{{theOtherUser.starsGiven}} Stars Given<br /></button></div><br />
			<div style="text-align:center"><button onclick="filterStarList('received')" class="hashTagButton" style="text-align:center; font-size:1.5em">{{theOtherUser.starsReceived}} Stars Received
			</h4></div><hr />
			<div style="clear:both"></div>
			{% if ownPage and theOtherUser.twitterUser %}
			<div id = "TwitterShow" style="text-align:center;">
				<button type="submit" class="btn btn-warning" onclick="redirectTwitter();">Connect to Twitter</button>
			</div>
			{%endif%}
			<br />
			<br />
			
		<div class="hero-unit" id="userPageMessageContainer">
			<div class="well"><i>
				<div id="userPageListMessage">
					Empty
				</div>
			</i>
			</div>
		</div>
		
		<div id="userStarList">

		</div>

		<br />
		<table class="table table-bordered" style="width:100%">
					<tr>
						<td style="text-align:center;" colspan=2><a href="../mobileview.html">Go back to feed</a></td>
					</tr>
		{% if not page.hideStarButton %}
			{% if ownPage %}
				
					<tr>
						<td style="text-align:center;" colspan=2><a href="../settings">Settings</a></td>
					</tr>
					<tr>
						<td style="text-align:center;" colspan=2><a href="../feedback">Feedback / Help</a></td>
					</tr>
			
					<tr>
						<td style="text-align:center;" colspan=2><a href="../logout">Log Out</a></td>
					</tr>
				
			{%endif%}
		{%endif%}
		</table>	
	</div>

{% endblock%}
{% block scripts %}
<script>
	$(document).ready(function(){
		if (canUseStorage()){
			sessionStorage.userID = {{user.ID}}
			//sessionStorage.twitterUser = {{user.twitterUser}}
			$.getJSON('/api/user', function(jdata)
			{	
				var users = []
				for(var i in jdata.objects){
					var currentUser = jdata.objects[i];
					userList[currentUser.id] = currentUser;				
					users.push(currentUser.firstName + " " + currentUser.lastName);				
				}

				loadStarsUserPage({{theOtherUser.ID}}, "userStarList", "userPageListMessage", "userPageMessageContainer", "all");
				
			});
			$("TwitterShow").css("display", "block");
		}
	});
	function filterStarList(filter){
		loadStarsUserPage({{theOtherUser.ID}}, "userStarList", "userPageListMessage", "userPageMessageContainer", filter);
		var totalStars = {{theOtherUser.starsGiven}} + {{theOtherUser.starsReceived}};
	}

</script>
{%endblock%}