<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="viewport" content="user-scalable=yes,width=device-width,initial-scale=1.0">
		<link rel="shortcut icon" type="image/x-icon" href="../static/img/staricon.ico" />
		<link rel="icon" type="image/x-icon" href="../static/img/staricon.ico" />
		<title>{{page.title}}</title>
		<link href="../static/css/bootstrap.css" rel="stylesheet"/>
		<link href="../static/css/bootstrap-responsive.css" rel="stylesheet"/>
		<link href="../static/css/jquery-ui-1.8.20.custom.css" rel="stylesheet"/>
		<style type="text/css">

		.hashTagButton
		{
			border:none; 
			background:transparent; 
			cursor: pointer;
			margin:0 0 0 -0.5em;

		}
		a , .hashTagButton
		{
			color:#B94E0D;	

		}
		a:hover , .hashTagButton:hover
		{
			color:#ff8833;			
		}
		.modalgradient
		{
			background-image: linear-gradient(bottom, rgb(255,244,120) 0%, rgb(250,255,99) 55%);
			background-image: -o-linear-gradient(bottom, rgb(255,244,120) 0%, rgb(250,255,99) 55%);
			background-image: -moz-linear-gradient(bottom, rgb(255,244,120) 0%, rgb(250,255,99) 55%);
			background-image: -webkit-linear-gradient(bottom, rgb(255,244,120) 0%, rgb(250,255,99) 55%);
			background-image: -ms-linear-gradient(bottom, rgb(255,244,120) 0%, rgb(250,255,99) 55%);

			background-image: -webkit-gradient(
				linear,
				left bottom,
				left top,
				color-stop(0, rgb(255,244,120)),
				color-stop(0.55, rgb(250,255,99))
			);
		}
		.starItemGiven
		{
			background: #eeff99;
			background: -moz-linear-gradient(top,  #F5F5F5 1%, #F5F5F5 44%, #eeff99 100%);
			background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,#F5F5F5), color-stop(44%,#F5F5F5), color-stop(100%,#eeff99));
			background: -webkit-linear-gradient(top,  #F5F5F5 1%,#F5F5F5 44%,#eeff99 100%);
			background: -o-linear-gradient(top,  #F5F5F5 1%,#F5F5F5 44%,#eeff99 100%);
			background: -ms-linear-gradient(top,  #F5F5F5 1%,#F5F5F5 44%,#eeff99 100%);
			background: linear-gradient(top,  #F5F5F5 1%,#F5F5F5 44%,#eeff99 100%);
			filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#F5F5F5', endColorstr='#eeff99',GradientType=0 );
		}
		.starItemRecieved
		{
			background: #dff1f5;
			background: -moz-linear-gradient(top,  #F5F5F5 1%, #F5F5F5 44%, #dff1f5 100%);
			background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,#F5F5F5), color-stop(44%,#F5F5F5), color-stop(100%,#dff1f5));
			background: -webkit-linear-gradient(top,  #F5F5F5 1%,#F5F5F5 44%,#dff1f5 100%);
			background: -o-linear-gradient(top,  #F5F5F5 1%,#F5F5F5 44%,#dff1f5 100%);
			background: -ms-linear-gradient(top,  #F5F5F5 1%,#F5F5F5 44%,#dff1f5 100%);
			background: linear-gradient(top,  #F5F5F5 1%,#F5F5F5 44%,#dff1f5 100%);
			filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#F5F5F5', endColorstr='#dff1f5',GradientType=0 );
		}
		.starItemGiven, .starItemRecieved
		{
			z-index:-1;
		}
		</style>
			{% block cssStyle %}{% endblock %}

			<!-- Google Analytics -->
			<script type="text/javascript">
				  var _gaq = _gaq || [];
				  _gaq.push(['_setAccount', 'UA-2733853-9']);
				  _gaq.push(['_trackPageview']);

				  (function() {
				    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
				  })();
			</script>
	</head>
	<body leftmargin="0px" topmargin="0px" marginwidth="0px" marginheight="0px" width="100%">
	
		<div class="navbar" style="width:100%; padding-left:0px; padding-right:0px;">
			<div class="navbar-inner" style="width:100%; padding-left:0px; padding-right:0px;">
				<div class="container" style="width:100%; padding-left:0px; padding-right:0px;">
					<!--  -->
					{% if not page.hideStarButton %}
					<span>
					<img width="30" height="30" src=../static/img/goldstar.png  class="brand" style="margin:-0.5em 0em 0em 0em"/><a class="brand underline" href="/users/{{ user.ID }}">{{user.firstName}}!</a>
					</span>
					<ul class="nav pull-right">
							
					<li><a href="#myModalview"><button  onclick="$('#myModal').toggle('slow'); getJSON(0);" class="btn btn-inverse" ><img width="23px" height="20px" src=../static/img/goldstar.png /></button></a></li>
					</ul>
					{% else %}
					<ul class="nav pull-right">
							
					<li><span style="color:black; font-size:1.2em">Not a user?</span> <button style="color:yellow;" onclick="signUpNewUser();" class="btn btn-inverse" >Sign Up</button></li>
					</ul>
					{%endif%}
				</div>
			</div>
		</div>
		
<!-- <div style="width:24%; height:100%; float:left; border:1px solid black">Hi</div>
<div style="width:24%; height:100%; float:left; border:1px solid black; margin-left: 1px">Bro</div> -->
	<div class="well" id="myModal" style="display:none; width:auto; height:auto; margin:auto">
		<div style="width:59%; height:100%; float:left;">
			<table style="width:98%;margin-left:auto">
				<tr>
					<td>
						<h4>Who</h4>
						<input id="modalViewUser" type="text" style="width:90%" class="input" placeholder="Person" />
					</td>
				</tr>
				<tr>
					<td>
						<h4>Hashtag</h4>
						<input id="modalViewEvent" type="text" style="width:90%" class="input" placeholder="Event" /><br />
						<div>
			      			Trending Hashtags:&nbsp;
			      			<a id="inStarHashLink1" onClick="setStarLinkValue(1)" style="display:none"></a>&nbsp;&nbsp;<a id="inStarHashLink2" onClick="setStarLinkValue(2)" style="display:none"></a>&nbsp;&nbsp;<a id="inStarHashLink3" onClick="setStarLinkValue(3)" style="display:none"></a>
			      		</div>
					</td>
				</tr>
				<tr>
					<td>
						<h4>Reason</h4>
						<textarea id="modalViewTextarea" onKeyDown="limitText(this.id, 75);" onKeyUp="limitText(this.id, 100);" style="resize:none;width:90%" rows="2" placeholder="For being awesome at this weeks conference!"></textarea>
					</td>
			</table>
		</div>
		<div style="width:39%; height:auto; float:left">
			<a href="#" class="btn btn-success" style="margin-top:1em; margin-left:1em;" onclick="if(noGiveStarErrors()){postJSON({{ user.ID }}, 1)}"><img style="margin:2em 2em 2em 2em" src="../static/img/icon-star.png" /></a>

			<div style="clear:both"></div>

			<a href="#" class="btn btn-danger" style="margin-top:2em; margin-left:1em;" onclick="resetModalView()"><img style="margin:2em 2em 2em 2em" src="../static/img/icon-cancel.png" /></a>
		</div>
		<div style="clear:both"></div>
		<div style="clear:both"></div>
		<div style="95%; height:auto">
			<div id = "modalViewConnectDiv" class="pull-left" style="display:none; padding-left:1em; padding-right:1em;">
				<button id = "modalViewConnect" type="submit" class="btn btn-warning" onclick="redirectTwitter();">Connect to Twitter</button>
			</div>
			<div style="text-align:center">
			<label class ="checkbox inline"><input type="checkbox" id="modalViewTweet" value="True" checked="checked" /><b>Tweet</b></label></div>
		</div>
		<div style="clear:both"></div>
		<div id="giveStarErrorDiv" style="color:red; display:none; text-align:center">
		</div>
	</div>
		
		<div id="MainContent">
			{% for message in get_flashed_messages() %}
  				  <div class=flash>{{ message }}</div>
 			{% endfor %}
  			{% block body %}{% endblock %}
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js"></script>
		<script src="../static/js/bootstrap-modal.js"></script>
		<script src="../static/js/knockout-2.1.0.js"></script>		
		<script src="../static/js/bootstrap.js"></script>
		<script src="../static/js/customscripts.js"></script>
		<script src="../static/js/mobileviewjs.js"></script>
		<script>
			function noGiveStarErrors(){
				$('#giveStarErrorDiv').hide();
				var noErrors = true;
				if (document.getElementById("modalViewUser").name == ""){
					showErrorMessage('givestar', 'Cannot identify Name.  Please make sure you are using a name from the drop down menu.');
					noErrors = false;
				}
				if (!$('#modalViewEvent').val()){
					showErrorMessage('givestar', 'Please use a hashtag');
					noErrors = false;
				}
				if(noErrors)
					return true;
				else
					return false;
			
			}
			$(function(){
				try
				{
					var hashurl = "/Hashtags"
					$.getJSON(hashurl, function(data){
						$( "#modalViewEvent" ).autocomplete({
							datatype:'json',
							source: data.hashtags
						});				
					});
				}
				catch(ex)
				{
					alert(ex.message);
				}
			})
		</script>
		<script>
			function setStarLinkValue(whichLink){
				if(whichLink == 1){
					$("#modalViewEvent").val($("#inStarHashLink1").html().replace("#",""))
				}
				else if(whichLink == 2){
					$("#modalViewEvent").val($("#inStarHashLink2").html().replace("#",""))
				}
				else if(whichLink == 3){
					$("#modalViewEvent").val($("#inStarHashLink3").html().replace("#",""))
				}
			}
			function signUpNewUser(){
				var currentURL = window.location.href;
				if (currentURL.toLowerCase().indexOf('/users') >= 0)
					window.location = "../signup";
				else if (currentURL.toLowerCase().indexOf('/star') >= 0)
					window.location = "../signup";
				else
					window.location = "signup";
			}
				
		</script>
			{% block scripts %}
			{% endblock %}
	</body>
</html>